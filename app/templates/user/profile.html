{% extends "layout.html" %}

{% block title %}Perfil de Usuario{% endblock %}

{% block content %}
<h2 class="text-center">ğŸ‘¤ Perfil de {{ user.username }}</h2>

<p class="text-muted">ğŸ“§ Email: {{ user.email }}</p>
<p>ğŸŒŸ PuntuaciÃ³n: <strong>{{ user.score }} puntos</strong></p>

<h3 class="mt-4">ğŸ† Mis Badges</h3>
{% if user.badges %}
<div class="row">
    {% for badge in user.badges %}
    <div class="col-md-3">
        <div class="card text-center shadow-sm">
            <img src="{{ url_for('static', filename=badge.image_url) }}" class="card-img-top p-3" alt="Badge">
            <div class="card-body">
                <h6 class="card-title">{{ badge.name }}</h6>
                <p class="text-muted small">{{ badge.description }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p class="text-muted">AÃºn no tienes badges. Â¡Sigue participando para obtenerlos! ğŸ…</p>
{% endif %}





<!-- ğŸ”¹ MÃ‰TRICAS DEL USUARIO -->
<div class="row text-center">
    <div class="col-md-4">
        <div class="card text-white bg-primary mb-3">
            <div class="card-header">ğŸ“‹ Listas Creadas</div>
            <div class="card-body">
                <h3>{{ total_listas }}</h3>
                <p>Total de listas creadas</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-header">ğŸ“Œ Ãtems AÃ±adidos</div>
            <div class="card-body">
                <h3>{{ total_items }}</h3>
                <p>Total de Ã­tems aÃ±adidos</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-warning mb-3">
            <div class="card-header">ğŸ’¬ Comentarios Recibidos</div>
            <div class="card-body">
                <h3>{{ total_comentarios }}</h3>
                <p>Comentarios en tus listas</p>
            </div>
        </div>
    </div>
</div>

<!-- ğŸ”¹ LIKES Y DISLIKES -->
<div class="row text-center">
    <div class="col-md-6">
        <div class="card text-white bg-info mb-3">
            <div class="card-header">ğŸ‘ Likes Recibidos</div>
            <div class="card-body">
                <h3>{{ total_likes }}</h3>
                <p>Total de likes en tus listas</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card text-white bg-danger mb-3">
            <div class="card-header">ğŸ‘ Dislikes Recibidos</div>
            <div class="card-body">
                <h3>{{ total_dislikes }}</h3>
                <p>Total de dislikes en tus listas</p>
            </div>
        </div>
    </div>
</div>

<!-- ğŸ”¹ LISTAS CREADAS -->
<div class="card mb-4">
    <div class="card-header bg-dark text-white">ğŸ“‹ Ãšltimas Listas Creadas</div>
    <ul class="list-group list-group-flush">
        {% for lista in listas_usuario %}
        <li class="list-group-item">
            <a href="{{ url_for('lists.view_list', list_id=lista.id) }}">
                <strong>{{ lista.name }}</strong> ({{ lista.items|length }} Ã­tems)
            </a>
            <span class="badge bg-primary">ğŸ‘ {{ lista.count_likes() }}</span>
            <span class="badge bg-danger">ğŸ‘ {{ lista.count_dislikes() }}</span>
        </li>
        {% else %}
        <li class="list-group-item text-center text-muted">No has creado listas aÃºn.</li>
        {% endfor %}
    </ul>
</div>

<!-- ğŸ”¹ ÃTEMS CREADOS -->
<div class="card">
    <div class="card-header bg-secondary text-white">ğŸ“Œ Ãšltimos Ãtems AÃ±adidos</div>
    <ul class="list-group list-group-flush">
        {% for item in items_usuario %}
        <li class="list-group-item">
            <img src="{{ item.image_url }}" alt="Imagen del Ã­tem" class="img-thumbnail" width="50">
            {{ item.content }} <small class="text-muted">(Lista: <a href="{{ url_for('lists.view_list', list_id=item.list.id) }}">{{ item.list.name }}</a>)</small>
        </li>
        {% else %}
        <li class="list-group-item text-center text-muted">No has aÃ±adido Ã­tems aÃºn.</li>
        {% endfor %}
    </ul>
</div>

<!-- ğŸ”¹ BOTONES DE EDICIÃ“N -->
<div class="text-center mt-4">
    <a href="{{ url_for('users.edit_profile') }}" class="btn btn-primary">âœï¸ Editar Perfil</a>
    <a href="{{ url_for('users.change_password') }}" class="btn btn-warning">ğŸ”‘ Cambiar ContraseÃ±a</a>
</div>

{% endblock %}
